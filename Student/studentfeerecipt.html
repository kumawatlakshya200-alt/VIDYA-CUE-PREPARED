<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fee Receipts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css">
    <style>
      * { box-sizing:border-box; margin:0; padding:0; }

      body {
        font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
        background:#f3f4f6;
        color:#0f172a;
        padding:1.5rem;
      }

      .page-root { max-width:1380px; margin:0 auto; }
      .space-y-6 > * + * { margin-top:1.5rem; }

      h1 { font-size:1.9rem; font-weight:700; }
      h2 { font-size:1.3rem; font-weight:600; }
      h3 { font-size:1.05rem; font-weight:600; }

      /* Card */
      .card {
        background:#ffffff;
        border-radius:1.2rem;
        box-shadow:0 10px 25px rgba(15,23,42,0.12);
        border:1px solid transparent;
      }
      .card-inner { padding:1.4rem; }

      /* Buttons */
      .btn {
        border-radius:9999px;
        border:1px solid #e5e7eb;
        padding:0.4rem 0.9rem;
        font-size:0.8rem;
        cursor:pointer;
        background:#ffffff;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap:0.3rem;
      }
      .btn:hover { background:#f9fafb; }
      .btn-sm { padding:0.32rem 0.8rem; font-size:0.78rem; }
      .btn-primary {
        background:#4f46e5;
        border-color:#4f46e5;
        color:#eff6ff;
      }
      .btn-primary:hover { background:#4338ca; }

      /* Badges */
      .badge {
        display:inline-flex;
        align-items:center;
        justify-content:center;
        padding:0.12rem 0.6rem;
        border-radius:9999px;
        font-size:0.7rem;
        border:1px solid transparent;
        white-space:nowrap;
      }

      .badge-green {
        background:#dcfce7;
        color:#166534;
        border-color:#bbf7d0;
      }
      .badge-orange {
        background:#ffedd5;
        color:#c2410c;
        border-color:#fed7aa;
      }

      .text-muted { color:#6b7280; }
      .text-xs { font-size:0.72rem; }
      .text-sm { font-size:0.82rem; }

      /* Grid helpers */
      .grid-3 {
        display:grid;
        grid-template-columns:minmax(0,1fr);
        gap:1rem;
      }
      @media (min-width:768px) {
        .grid-3 { grid-template-columns:repeat(3,minmax(0,1fr)); }
      }

      .space-y-4 > * + * { margin-top:1rem; }

      /* Hero */
      .hero {
        background:linear-gradient(135deg,#4f46e5,#7c3aed);
        border-radius:1.5rem;
        padding:2rem;
        color:#eef2ff;
        box-shadow:0 20px 40px rgba(55,48,163,0.55);
      }
      .hero-inner {
        display:flex;
        flex-direction:column;
        gap:1.5rem;
      }
      @media (min-width:1024px) {
        .hero-inner {
          flex-direction:row;
          align-items:center;
          justify-content:space-between;
        }
      }

      .hero-chip {
        display:inline-flex;
        align-items:center;
        gap:0.35rem;
        padding:0.18rem 0.7rem;
        background:rgba(255,255,255,0.15);
        border-radius:9999px;
        font-size:0.76rem;
        backdrop-filter:blur(10px);
        margin-bottom:0.8rem;
      }

      .hero-stat {
        background:rgba(255,255,255,0.12);
        border-radius:0.9rem;
        padding:0.8rem 1rem;
        border:1px solid rgba(255,255,255,0.2);
      }

      .hero-stat-label {
        font-size:0.72rem;
        color:#e0e7ff;
      }
      .hero-stat-value {
        font-size:1.35rem;
        font-weight:600;
      }

      /* Student info */
      .info-pill {
        padding:0.9rem;
        border-radius:0.9rem;
        background:#f9fafb;
      }

      /* Upcoming */
      .upcoming-border {
        border-left:4px solid #f97316;
      }
      .upcoming-item {
        display:flex;
        flex-direction:column;
        gap:1rem;
        padding:1rem;
        border-radius:0.9rem;
        background:#f9fafb;
      }
      @media (min-width:768px) {
        .upcoming-item {
          flex-direction:row;
          align-items:center;
          justify-content:space-between;
        }
      }

      /* Payment cards */
      .payment-card-header {
        display:flex;
        align-items:flex-start;
        justify-content:space-between;
        gap:1rem;
        margin-bottom:0.9rem;
      }

      .payment-left {
        display:flex;
        gap:0.9rem;
      }

      .payment-icon {
        width:3rem;
        height:3rem;
        border-radius:0.8rem;
        background:#dcfce7;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:1.6rem;
      }

      .pill-dot {
        width:0.25rem;
        height:0.25rem;
        border-radius:9999px;
        background:#9ca3af;
      }

      .breakdown-row {
        display:flex;
        align-items:center;
        justify-content:space-between;
        font-size:0.82rem;
      }

      .breakdown-card {
        background:#f9fafb;
        border-radius:0.9rem;
        padding:0.9rem;
      }

      .total-row {
        margin-top:0.7rem;
        padding-top:0.7rem;
        border-top:1px solid #e5e7eb;
        display:flex;
        align-items:center;
        justify-content:space-between;
      }

      /* Fee structure */
      .fee-row {
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding:0.6rem 0.75rem;
        border-radius:0.8rem;
        background:#f9fafb;
        font-size:0.82rem;
      }

      .fee-total-row {
        margin-top:0.8rem;
        padding:0.7rem 0.85rem;
        border-radius:0.9rem;
        background:#eef2ff;
        display:flex;
        align-items:center;
        justify-content:space-between;
      }

      /* Toast */
      .toast {
        position:fixed;
        bottom:1rem;
        right:1rem;
        background:#111827;
        color:#f9fafb;
        padding:0.6rem 0.9rem;
        border-radius:0.7rem;
        font-size:0.8rem;
        box-shadow:0 10px 25px rgba(15,23,42,0.6);
        opacity:0;
        transform:translateY(10px);
        transition:opacity 0.15s ease, transform 0.15s ease;
        z-index:40;
      }
      .toast.show {
        opacity:1;
        transform:translateY(0);
      }
    </style>
  </head>
  <body>
    <div id="header-placeholder"></div>
    <div class="page-root">
      <div class="space-y-6">
        <!-- Header -->
        <section class="hero">
          <div class="hero-inner">
            <div>
              <div class="hero-chip">
                <span style="font-size:1rem;">ðŸ§¾</span>
                <span>Fee Management</span>
              </div>
              <h1 style="margin-bottom:0.25rem;">Fee Receipts</h1>
              <p style="color:#e0e7ff;font-size:0.9rem;">
                View and download your fee payment receipts
              </p>
            </div>
            <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:0.9rem;max-width:260px;">
              <div class="hero-stat">
                <div class="hero-stat-value" id="currentTotal"></div>
                <div class="hero-stat-label">Current Semester</div>
              </div>
              <div class="hero-stat">
                <div class="hero-stat-value" id="paidReceipts"></div>
                <div class="hero-stat-label">Paid Receipts</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Student Information -->
        <section class="card">
          <div class="card-inner">
            <h3 style="margin-bottom:0.9rem;">Student Information</h3>
            <div class="grid-3">
              <div class="info-pill">
                <p class="text-sm text-muted" style="margin-bottom:0.15rem;">Name</p>
                <p id="studentName"></p>
              </div>
              <div class="info-pill">
                <p class="text-sm text-muted" style="margin-bottom:0.15rem;">Student ID</p>
                <p id="studentId"></p>
              </div>
              <div class="info-pill">
                <p class="text-sm text-muted" style="margin-bottom:0.15rem;">Course</p>
                <p id="studentCourse"></p>
              </div>
              <div class="info-pill">
                <p class="text-sm text-muted" style="margin-bottom:0.15rem;">Year</p>
                <p id="studentYear"></p>
              </div>
              <div class="info-pill">
                <p class="text-sm text-muted" style="margin-bottom:0.15rem;">Semester</p>
                <p id="studentSemester"></p>
              </div>
              <div class="info-pill">
                <p class="text-sm text-muted" style="margin-bottom:0.15rem;">Academic Year</p>
                <p id="studentAcademicYear"></p>
              </div>
            </div>
          </div>
        </section>

        <!-- Upcoming Payments -->
        <section id="upcomingSection" class="card upcoming-border" style="display:none;">
          <div class="card-inner">
            <div style="display:flex;align-items:flex-start;gap:1rem;">
              <div style="width:3rem;height:3rem;border-radius:0.8rem;background:#ffedd5;display:flex;align-items:center;justify-content:center;font-size:1.6rem;flex-shrink:0;">
                âš 
              </div>
              <div style="flex:1;">
                <h3 style="margin-bottom:0.7rem;">Upcoming Payment</h3>
                <div id="upcomingList" class="space-y-4"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Payment History -->
        <section>
          <h2 style="margin-bottom:0.7rem;">Payment History</h2>
          <div id="paymentHistoryList" class="space-y-4"></div>
        </section>

        <!-- Fee Structure -->
        <section class="card">
          <div class="card-inner">
            <h3 style="margin-bottom:0.7rem;">Current Semester Fee Structure</h3>
            <div id="feeStructureList" class="space-y-2"></div>
          </div>
        </section>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script>
      const studentData = {
        name: "Himanshu Saini",
        studentId: "CSE2024001",
        course: "B.Tech Computer Science Engineering",
        semester: "Semester 1",
        year: "1st Year",
        academicYear: "2024-2025",
      };

      const feeStructure = {
        tuitionFee: 75000,
        developmentFee: 10000,
        labFee: 5000,
        libraryFee: 2000,
        examFee: 3000,
        sportsFee: 1500,
        otherFees: 3500,
        total: 100000,
      };

      const paymentHistory = [
        {
          id: 1,
          receiptNo: "REC2024001",
          date: "2024-08-15",
          semester: "Semester 1",
          amount: 100000,
          paymentMode: "Online",
          transactionId: "TXN123456789",
          status: "Paid",
          breakdown: feeStructure,
        },
        {
          id: 2,
          receiptNo: "REC2023002",
          date: "2024-01-10",
          semester: "Semester 2 (2023)",
          amount: 95000,
          paymentMode: "Bank Transfer",
          transactionId: "TXN987654321",
          status: "Paid",
          breakdown: {
            tuitionFee: 70000,
            developmentFee: 10000,
            labFee: 5000,
            libraryFee: 2000,
            examFee: 3000,
            sportsFee: 1500,
            otherFees: 3500,
            total: 95000,
          },
        },
      ];

      const upcomingPayments = [
        {
          id: 1,
          semester: "Semester 2",
          dueDate: "2025-01-15",
          amount: 100000,
          status: "Pending",
          daysRemaining: 56,
        },
      ];

      const toastEl = document.getElementById("toast");
      function showToast(message) {
        toastEl.textContent = message;
        toastEl.classList.add("show");
        setTimeout(() => toastEl.classList.remove("show"), 2000);
      }

      function formatCurrency(num) {
        return "â‚¹" + num.toLocaleString("en-IN");
      }

      // Header stats
      document.getElementById("currentTotal").textContent =
        formatCurrency(feeStructure.total);
      document.getElementById("paidReceipts").textContent =
        paymentHistory.length;

      // Student info
      document.getElementById("studentName").textContent = studentData.name;
      document.getElementById("studentId").textContent = studentData.studentId;
      document.getElementById("studentCourse").textContent = studentData.course;
      document.getElementById("studentYear").textContent = studentData.year;
      document.getElementById("studentSemester").textContent =
        studentData.semester;
      document.getElementById("studentAcademicYear").textContent =
        studentData.academicYear;

      // Upcoming payments
      const upcomingSection = document.getElementById("upcomingSection");
      const upcomingList = document.getElementById("upcomingList");
      if (upcomingPayments.length > 0) {
        upcomingSection.style.display = "block";
        upcomingPayments.forEach((p) => {
          const wrap = document.createElement("div");
          wrap.className = "upcoming-item";
          const dueDate = new Date(p.dueDate).toLocaleDateString();
          wrap.innerHTML = `
            <div>
              <h4 style="font-size:0.95rem;font-weight:600;margin-bottom:0.15rem;">${p.semester}</h4>
              <div style="display:flex;flex-wrap:wrap;gap:0.7rem;font-size:0.8rem;color:#6b7280;">
                <div style="display:flex;align-items:center;gap:0.3rem;">
                  <span>ðŸ“…</span><span>Due: ${dueDate}</span>
                </div>
                <span style="color:#ea580c;">${p.daysRemaining} days remaining</span>
              </div>
            </div>
            <div style="display:flex;align-items:center;gap:1rem;flex-shrink:0;">
              <div style="text-align:right;">
                <p style="font-size:1.3rem;font-weight:600;">${formatCurrency(
                  p.amount
                )}</p>
                <p class="text-sm text-muted">Amount Due</p>
              </div>
              <button class="btn btn-primary btn-sm" data-pay-id="${
                p.id
              }">ðŸ’³ Pay Now</button>
            </div>
          `;
          upcomingList.appendChild(wrap);
        });
      }

      upcomingList.addEventListener("click", (e) => {
        const btn = e.target.closest("[data-pay-id]");
        if (!btn) return;
        const id = btn.getAttribute("data-pay-id");
        const payment = upcomingPayments.find((p) => p.id === Number(id));
        if (payment) {
          showToast("Redirecting to payment for " + payment.semester);
        }
      });

      // Payment history
      const paymentHistoryList = document.getElementById("paymentHistoryList");
      paymentHistory.forEach((p) => {
        const card = document.createElement("div");
        card.className = "card";
        const dateStr = new Date(p.date).toLocaleDateString();
        card.innerHTML = `
          <div class="card-inner">
            <div class="payment-card-header">
              <div class="payment-left">
                <div class="payment-icon">âœ…</div>
                <div>
                  <h3 style="margin-bottom:0.2rem;">Receipt #${p.receiptNo}</h3>
                  <p class="text-sm text-muted" style="margin-bottom:0.25rem;">${
                    p.semester
                  }</p>
                  <div style="display:flex;flex-wrap:wrap;gap:0.5rem;font-size:0.8rem;color:#6b7280;">
                    <div style="display:flex;align-items:center;gap:0.3rem;">
                      <span>ðŸ“…</span><span>${dateStr}</span>
                    </div>
                    <span class="pill-dot"></span>
                    <span>${p.paymentMode}</span>
                    <span class="pill-dot"></span>
                    <span>TXN: ${p.transactionId}</span>
                  </div>
                </div>
              </div>
              <span class="badge badge-green">${p.status}</span>
            </div>

            <div class="breakdown-card" style="margin-bottom:0.9rem;">
              <h4 style="margin-bottom:0.5rem;">Fee Breakdown</h4>
              <div style="display:grid;grid-template-columns:minmax(0,1fr);gap:0.3rem;">
                <div class="breakdown-row">
                  <span class="text-muted">Tuition Fee</span>
                  <span>${formatCurrency(p.breakdown.tuitionFee)}</span>
                </div>
                <div class="breakdown-row">
                  <span class="text-muted">Development Fee</span>
                  <span>${formatCurrency(p.breakdown.developmentFee)}</span>
                </div>
                <div class="breakdown-row">
                  <span class="text-muted">Lab Fee</span>
                  <span>${formatCurrency(p.breakdown.labFee)}</span>
                </div>
                <div class="breakdown-row">
                  <span class="text-muted">Library Fee</span>
                  <span>${formatCurrency(p.breakdown.libraryFee)}</span>
                </div>
                <div class="breakdown-row">
                  <span class="text-muted">Exam Fee</span>
                  <span>${formatCurrency(p.breakdown.examFee)}</span>
                </div>
                <div class="breakdown-row">
                  <span class="text-muted">Sports Fee</span>
                  <span>${formatCurrency(p.breakdown.sportsFee)}</span>
                </div>
                <div class="breakdown-row">
                  <span class="text-muted">Other Fees</span>
                  <span>${formatCurrency(p.breakdown.otherFees)}</span>
                </div>
              </div>
              <div class="total-row">
                <span>Total Amount Paid</span>
                <span style="font-size:1.2rem;font-weight:600;">${formatCurrency(
                  p.breakdown.total
                )}</span>
              </div>
            </div>

            <div style="display:flex;gap:0.4rem;flex-wrap:wrap;">
              <button class="btn btn-sm btn-primary" data-download="${
                p.id
              }">â¬‡ Download PDF</button>
              <button class="btn btn-sm" data-print="${p.id}">ðŸ–¨ Print</button>
              <button class="btn btn-sm">ðŸ“„ Details</button>
            </div>
          </div>
        `;
        paymentHistoryList.appendChild(card);
      });

      paymentHistoryList.addEventListener("click", (e) => {
        const target = e.target;
        const downloadBtn = target.closest("[data-download]");
        const printBtn = target.closest("[data-print]");

        if (downloadBtn) {
          const id = downloadBtn.getAttribute("data-download");
          const rec = paymentHistory.find((p) => p.id === Number(id));
          if (rec) {
            showToast("Downloading receipt " + rec.receiptNo);
          }
        } else if (printBtn) {
          const id = printBtn.getAttribute("data-print");
          const rec = paymentHistory.find((p) => p.id === Number(id));
          if (rec) {
            showToast("Printing receipt " + rec.receiptNo);
          }
        }
      });

      // Fee structure list
      const feeStructureList = document.getElementById("feeStructureList");
      Object.entries(feeStructure).forEach(([key, value]) => {
        if (key === "total") return;
        const label = key
          .replace(/([A-Z])/g, " $1")
          .replace(/^./, (str) => str.toUpperCase());
        const row = document.createElement("div");
        row.className = "fee-row";
        row.innerHTML = `
          <span class="text-muted">${label}</span>
          <span>${formatCurrency(value)}</span>
        `;
        feeStructureList.appendChild(row);
      });

      const totalRow = document.createElement("div");
      totalRow.className = "fee-total-row";
      totalRow.innerHTML = `
        <span>Total Fee</span>
        <span style="font-size:1.2rem;font-weight:600;">${formatCurrency(
          feeStructure.total
        )}</span>
      `;
      feeStructureList.appendChild(totalRow);
    </script>
    <script src="include-html.js"></script>
  </body>
</html>

